<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<app-admin-navbar></app-admin-navbar>

<div class="container-fluid p-0"
  style="background: url('assets/background.png') no-repeat center center; background-size: cover; min-height: 100vh; height: 100%; overflow-x: hidden;">
  <section class="dashboard-section py-5">
    <div class="container">
      <h1 class="text-center text-white">User Management</h1>

      <div class="row justify-content-center mb-4">
        <div class="col-md-6">
          <input type="text" placeholder="Search by email" [(ngModel)]="searchQuery" class="form-control" />
        </div>
      </div>

      <div class="card-container">
        <div class="user-card" *ngFor="let user of filteredUsers()">
          <h3>{{ user.email }}</h3>
          <p>Roles:</p>
          <div class="role-buttons">
            <button [ngClass]="{ 'has-role': user.groups?.includes('User'), 'no-role': !user.groups?.includes('User') }"
              (click)="toggleUserRole(user.sub, 'User')">
              User
            </button>
            <button
              [ngClass]="{ 'has-role': user.groups?.includes('Admin'), 'no-role': !user.groups?.includes('Admin') }"
              (click)="toggleUserRole(user.sub, 'Admin')">
              Admin
            </button>
          </div>
        </div>

      </div>
    </div>
  </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
